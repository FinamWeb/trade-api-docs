<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-usage">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">Использование | Trade API</title><meta data-rh="true" property="og:url" content="https://finamweb.github.io/trade-api-docs/usage"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://finamweb.github.io/trade-api-docs/img/meta-image.png"><meta data-rh="true" property="og:image:secure_url" content="https://finamweb.github.io/trade-api-docs/img/meta-image.png"><meta data-rh="true" property="og:image" content="https://finamweb.github.io/trade-api-docs/img/meta-image.png"><meta data-rh="true" property="og:image:width" content="1200"><meta data-rh="true" property="og:image:height" content="630"><meta data-rh="true" property="og:image:alt" content="Trade API — Все самое необходимое для алготрейдинга"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Использование | Trade API"><meta data-rh="true" name="description" content="Описание всех текущих методов API и параметров их вызова доступно по адресу https://trade-api.finam.ru/swagger/index.html. Там же можно выполнить запросы по токену прямо в браузере."><meta data-rh="true" property="og:description" content="Описание всех текущих методов API и параметров их вызова доступно по адресу https://trade-api.finam.ru/swagger/index.html. Там же можно выполнить запросы по токену прямо в браузере."><link data-rh="true" rel="icon" href="/trade-api-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://finamweb.github.io/trade-api-docs/usage"><link data-rh="true" rel="alternate" href="https://finamweb.github.io/trade-api-docs/usage" hreflang="ru"><link data-rh="true" rel="alternate" href="https://finamweb.github.io/trade-api-docs/usage" hreflang="x-default"><link rel="stylesheet" href="/trade-api-docs/assets/css/styles.f12f7631.css">
<link rel="preload" href="/trade-api-docs/assets/js/runtime~main.d000aedb.js" as="script">
<link rel="preload" href="/trade-api-docs/assets/js/main.c1242d10.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Перейти к основному содержимому</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/trade-api-docs/"><div class="navbar__logo"><img src="/trade-api-docs/img/logo.png" alt="Trade API Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/trade-api-docs/img/logo.png" alt="Trade API Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Trade API</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/trade-api-docs/">Документация</a><a href="https://trade-api.finam.ru/swagger/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Swagger<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://vk.com/finam_trade_api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Trade API VK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="mailto:trade_api@corp.finam.ru" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Обратная связь<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/FinamWeb/trade-api-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-label="Переключение между темным и светлым режимом (сейчас используется Светлый режим)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/trade-api-docs/">Общая информация</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/trade-api-docs/getting-started">Как начать пользоваться</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/trade-api-docs/tokens">Токены доступа</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/trade-api-docs/usage">Использование</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/trade-api-docs/limits">Лимитная политика</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/trade-api-docs/category/rest-api">REST API</a><button aria-label="Свернуть/развернуть категорию &#x27;REST API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/trade-api-docs/category/grpc">gRPC</a><button aria-label="Свернуть/развернуть категорию &#x27;gRPC&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/trade-api-docs/category/примеры-использования">Примеры использования</a><button aria-label="Свернуть/развернуть категорию &#x27;Примеры использования&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/trade-api-docs/faq">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/trade-api-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Использование</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><h1>Использование</h1><p>Описание всех текущих методов API и параметров их вызова доступно по адресу <a href="https://trade-api.finam.ru/swagger/index.html" target="_blank" rel="noopener noreferrer">https://trade-api.finam.ru/swagger/index.html</a>. Там же можно выполнить запросы по токену прямо в браузере.</p><p>Все методы можно разделить на группы. Далее идет описание групп и основных методов.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="авторизация">Авторизация<a class="hash-link" href="#авторизация" title="Прямая ссылка на этот заголовок">​</a></h2><p>Для выполнения методов API необходимо передавать токен доступа в каждом запросе.</p><p>Формат заголовка: <code>Authorization: Bearer &lt;токен_доступа&gt;</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="рыночная-информация">Рыночная информация<a class="hash-link" href="#рыночная-информация" title="Прямая ссылка на этот заголовок">​</a></h2><p>Сюда относятся методы получения текущей рыночной информации:</p><ul><li>Получение информации о доступных инструментах и их параметрах <code>GET ​/api​/v1​/securities</code>;</li><li>Получение информации об истории торгов по инструменту (график);</li><li>Получение потоковой информации market data. Реализовано в виде методов подписки на события. Можно подписываться на следующие события:<ul><li>стакан,</li><li>котировки,</li><li>сделки.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="клиентский-счет">Клиентский счет<a class="hash-link" href="#клиентский-счет" title="Прямая ссылка на этот заголовок">​</a></h2><p>Trade API позволяет получить доступ только к Единым счетам, открытым в АО &quot;Финам&quot;. Оперирование идет по торговому коду, который вы видите в ИТС TRANSAQ. Торговый код необходимо использовать в поле <code>ClientID</code>.</p><p>Сюда относятся методы:</p><ul><li>Получения текущего состояния счета <code>GET ​/api​/v1​/portfolio</code>;</li><li>Получение информации о заявках <code>GET ​/api​/v1​/orders</code> или стоп-заявках <code>GET ​/api​/v1​/stop-orders</code> по счетам;</li><li>Получение информации о сделках по счетам.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="торговые-операции">Торговые операции<a class="hash-link" href="#торговые-операции" title="Прямая ссылка на этот заголовок">​</a></h2><p>Сюда относятся методы:</p><ul><li>Выставить новую заявку (рыночную / лимитированную условную) по счету <code>POST ​/api​/v1​/orders</code>;</li><li>Отменить заявку <code>DELETE ​/api​/v1​/orders</code> или стоп-заявку <code>DELETE ​/api​/v1​/stop-orders</code>.</li></ul><p>На обработку нового поручения по размещению заявки в биржевой стакан требуется некоторое время, поэтому этот метод возвращает структуру с <code>transaction_id</code>, которая может быть использована для поиска соответствующей заявки через <code>GetOrdersRequest</code> или в сообщении <code>OrderEvent</code> от сервиса событий (<code>EventResponse.event.order</code>).</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Справка</div><div class="admonitionContent_S0QG"><p><code>transaction_id</code> - это целочисленный номер, который однозначно идентифицирует транзакцию внутри текущего сеанса связи с сервером.</p></div></div><p>После того как в результате транзакции на Бирже появится соответствующий объект (заявка), основным идентификатором этого объекта становится регистрационный номер Биржи. Transaction_id является также основным идентификатором условной заявки (результата транзакции) до тех пор, пока заявка не будет выставлена на Биржу и не приобретёт регистрационный номер Биржи.</p><p>Значения property:</p><ul><li><strong>PutInQueue</strong>: неисполненная часть заявки помещается в очередь заявок Биржи;</li><li><strong>FOK</strong>: сделки совершаются только в том случае, если заявка может быть удовлетворена полностью;</li><li><strong>IOC</strong>: неисполненная часть заявки снимается с торгов;</li><li>Для выставления рыночной заявки достаточно указать в поле <code>price</code> значение <strong>0</strong>.</li></ul><p>Допустимые типы условия условных заявок:</p><ul><li><strong>Bid</strong>: лучшая цена покупки;</li><li><strong>BidOrLast</strong>: лучшая цена покупки или сделка по заданной цене и выше;</li><li><strong>Ask</strong>: лучшая цена продажи;</li><li><strong>AskOrLast</strong>: лучшая цена продажи или сделка по заданной цене и ниже;</li><li><strong>CovDown</strong>: обеспеченность ниже заданной;</li><li><strong>CovUp</strong>: обеспеченность выше заданной;</li><li><strong>LastUp</strong>: сделка на рынке по заданной цене или выше;</li><li><strong>LastDown</strong>: сделка на рынке по заданной цене или ниже.</li></ul><p>Такие поля как, например, <code>condition</code> или <code>validbefore</code> являются необязательными. Их можно не указывать в запросе.</p><p>Для отмены заявки нужно также указать <code>transaction_id</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="стоп-заявки">Стоп-заявки<a class="hash-link" href="#стоп-заявки" title="Прямая ссылка на этот заголовок">​</a></h2><p>Cтоп-заявка в системе TRANSAQ (или cтоп) — это распоряжение, предписывающее серверу TRANSAQ выполнить в автоматизированном режиме транзакционные действия, реализующие логику стоп-лосс или тейк-профит в зависимости от ценовых условий на рынке.</p><p>Основное предназначение стоп-заявок — автоматизировать управление существующей или потенциальной позицией клиента, которое заключается в своевременном выполнении одного из следующих действий:</p><ul><li>своевременно закрыть позицию при неблагоприятном изменении цены, ограничив убытки заранее определённой величиной (исполнить стоп-лосс);</li><li>зафиксировать прибыль после достижения ценой достаточно прибыльного уровня при возникновении признаков окончания благоприятного тренда (исполнить тейк-профит).</li></ul><p>Cтоп-заявки могут также с успехом применяться для автоматизированного открытия новой позиции при определённых условиях, например, при возникновении признаков смены тренда или, наоборот, для открытия позиции «по тренду».</p><p>Стоп-заявка состоит из двух частей:</p><ul><li>Стоп-лосс (далее — <strong>SL</strong>),</li><li>Тейк-профит (далее — <strong>TP</strong>).</li></ul><blockquote><p>При выполнении условия для одной части стоп-заявки вторая ее часть снимается. Вторая часть стоп-заявки снимается даже в том случае, если попытка выставить заявку на Биржу при исполнении оказалась неуспешной. Допускаются стоп-заявки, содержащие только одну часть (SL или TP). Для закрытия коротких позиций следует выставлять стопы на покупку, для закрытия длинных позиций - стопы на продажу. Обе части стоп-заявки допускают использование признака «по рынку».</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cтоп-лосс">Cтоп-лосс<a class="hash-link" href="#cтоп-лосс" title="Прямая ссылка на этот заголовок">​</a></h2><p>SL предназначен для закрытия позиций с целью ограничения убытков от удержания позиции при неблагоприятном движении цены на рынке. Следовательно:</p><ul><li>для стопа на продажу часть SL активируется, когда цена на рынке станет меньше либо равна цене активации стоп-лосса;</li><li>для стопа на покупку часть SL активируется, когда цена на рынке станет больше либо равна цене активации стоп-лосса.</li></ul><p>При выставлении SL необходимо задать <em>цену активации</em> и <em>цену заявки</em>, которая будет отправлена на Биржу при достижении рынком цены активации.</p><p>Использование необязательного параметра <em>защитное время</em> позволяет предотвратить исполнение стопа при «проколах» на рынке, т.е. в таких ситуациях, когда цены на рынке лишь кратковременно достигают уровня цены активации и вскоре возвращаются обратно. В частности, такие явления наблюдаются при интервенциях или ошибках крупных участников, когда на рынке внезапно регистрируется значительное отклонение цен произошедших сделок, но реальной возможности совершить сделки по таким ценам на рынке не возникает.</p><p>Защитное время задаётся в целых секундах и отсчитывается от времени получения сервером первой сделки, удовлетворяющей цене активации. Если в течение защитного времени на рынке будут зафиксированы сделки, не подтверждающие наступление уровня цены активации (т.е. сделки по цене выше цены активации для SL на продажу, либо по цене ниже цены активации для SL на покупку), то стоп-лосс возвращается в состояние «Ожидает активации».</p><p>Если защитное время не задано, то даже одна сделка на рынке по цене, удовлетворяющей цене активации, приводит к исполнению стоп-лосса.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="тейк-профит">Тейк-профит<a class="hash-link" href="#тейк-профит" title="Прямая ссылка на этот заголовок">​</a></h2><p>TP предназначен для закрытия позиций с фиксацией прибыли. Следовательно:</p><ul><li>для стопа на продажу часть TP активируется, когда цена на рынке станет больше либо равна цене активации;</li><li>для стопа на покупку часть TP активируется, когда цена на рынке станет меньше либо равна цене активации.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="простой-tp">Простой TP<a class="hash-link" href="#простой-tp" title="Прямая ссылка на этот заголовок">​</a></h3><p>Для ввода простого TP достаточно задать <em>цену активации</em> и <em>количество</em>.</p><p>В этом случае на Биржу будет отправлена заявка с ценой, равной цене первой же сделки на рынке, которая удовлетворяет цене активации.</p><p>Можно увеличить вероятность совершения сделки при исполнении стопа, задав <em>защитный спрэд</em>. Для определения цены заявки, исполняющей TP на покупку, защитный спрэд прибавляется к цене рынка. Для определения цены заявки, исполняющей TP на продажу, защитный спрэд вычитается из цены рынка.</p><p>Для простого TP также можно установить защитное время (см. выше описание SL).</p><blockquote><p>При использовании защитного времени в качестве цены рынка (от которой определяется цена заявки, исполняющей TP) принимается цена последней по времени сделки, полученной сервером в течение защитного времени.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="следящий-trailing-tp">Следящий (trailing) TP<a class="hash-link" href="#следящий-trailing-tp" title="Прямая ссылка на этот заголовок">​</a></h3><p>Позволяет выставить на Биржу заявку, закрывающую позицию в момент появления признаков окончания благоприятного тренда на рынке.</p><p>Для того чтобы включить механизм отслеживания тренда, необходимо при выставлении TP задать значение поля <em>коррекция</em>.</p><p>Это значение используется сервером TRANSAQ для определения момента окончания благоприятного тренда следующим образом:</p><ul><li>для TP на продажу считается, что растущий тренд заканчивается в тот момент, когда после того, как рынок вырос до уровня цены активации или выше, он снизится на величину коррекции от максимальной цены;</li><li>для TP на покупку считается, что нисходящий тренд заканчивается в тот момент, когда после того, как рынок снизился до уровня цены активации или ниже, он вырастет на величину коррекции от минимальной цены;
Величина коррекции может быть задана как в виде абсолютного изменения цены, так и в виде процента от цены. Для следящего TP также могут быть заданы <em>защитный спрэд</em> и/или <em>защитное время</em>.</li></ul><p>Если для следящего TP задано <em>защитное время</em>, то оно действует как при определении факта достижения цены активации, так и при определении факта окончания тренда (достижения заданного уровня коррекции).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="связанные-заявки">Связанные заявки<a class="hash-link" href="#связанные-заявки" title="Прямая ссылка на этот заголовок">​</a></h2><p>Любая стоп-заявка может иметь <em>«связь по исполнению»</em> с активной заявкой на бирже. Такая связь означает, что действие стоп-заявки начнётся не с момента её ввода в TRANSAQ, а в тот момент, когда соответствующая активная заявка исполнится (или частично исполнится) на Бирже. «Связь по исполнению» удобно применять в тех случаях, когда необходимо обеспечить стоп-процессинг для позиции, которая ещё не открыта, но может быть открыта при исполнении активной заявки.</p><p>Несколько стоп-заявок могут иметь связь по исполнению с одной и той же активной заявкой. Это позволяет организовать ступенчатое закрытие позиции частями на разных ценовых уровнях в заданных пропорциях.</p><p>При снятии активной заявки до её (полного или частичного) исполнения на Бирже все стоп-заявки, имеющие с нею связь по исполнению, также автоматически будут сняты.</p><p>При вводе связанного стопа его направление (покупка/продажа) устанавливается противоположным направлению активной заявки.</p><p><em>Инструмент</em>, <em>Режим</em> и <em>Клиент</em> также копируются из активной заявки, но при необходимости могут быть изменены.</p><p>Если в момент ввода связанного стопа заявка уже исполнена (в т.ч. частично), то он сразу переходит в состояние ожидания активации.</p><p>Связь по исполнению может быть использована как способ автоматизации торговых операций в одном финансовом инструменте по условию цены в другом инструменте. Выставляется «триггерная» заявка на минимальный объём в индикативном инструменте и к ней привязывается стоп по исполнению, открывающий или закрывающий позицию в торговом инструменте. К этой же «триггерной» заявке можно привязать стоп, который автоматически закроет позицию, возникшую при ее исполнении.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Навигация по странице документации"><a class="pagination-nav__link pagination-nav__link--prev" href="/trade-api-docs/tokens"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Токены доступа</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/trade-api-docs/limits"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Лимитная политика</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#авторизация" class="table-of-contents__link toc-highlight">Авторизация</a></li><li><a href="#рыночная-информация" class="table-of-contents__link toc-highlight">Рыночная информация</a></li><li><a href="#клиентский-счет" class="table-of-contents__link toc-highlight">Клиентский счет</a></li><li><a href="#торговые-операции" class="table-of-contents__link toc-highlight">Торговые операции</a></li><li><a href="#стоп-заявки" class="table-of-contents__link toc-highlight">Стоп-заявки</a></li><li><a href="#cтоп-лосс" class="table-of-contents__link toc-highlight">Cтоп-лосс</a></li><li><a href="#тейк-профит" class="table-of-contents__link toc-highlight">Тейк-профит</a><ul><li><a href="#простой-tp" class="table-of-contents__link toc-highlight">Простой TP</a></li><li><a href="#следящий-trailing-tp" class="table-of-contents__link toc-highlight">Следящий (trailing) TP</a></li></ul></li><li><a href="#связанные-заявки" class="table-of-contents__link toc-highlight">Связанные заявки</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/trade-api-docs/">Документация</a><span class="footer__link-separator">·</span><a href="https://trade-api.finam.ru/swagger/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Swagger<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div></div></footer></div>
<script src="/trade-api-docs/assets/js/runtime~main.d000aedb.js"></script>
<script src="/trade-api-docs/assets/js/main.c1242d10.js"></script>
</body>
</html>